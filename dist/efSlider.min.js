/* @author Alex Franzelin @license Mit license  Written for encaleo */
!function(a){var b=function(){"use strict";this.settings={arrows:!0,arrowPrev:"&lt;",arrowNext:"&gt;",dots:!1,pageNum:!0,start:1,autoplay:!1,loop:!1,speed:500,interval:3e3,fluid:!1,onSlideComplete:function(){}},this.$this=!1,this.$container=!1,this.$items=!1,this.current=!1,this.total=!1,this.width=!1,this.locked=!1;var b=this;this.dots=function(){for(var a='<div class="efSliderDots">',b=1;b<=this.total;b++)a+='<a href="#" class="dot dot-'+b,a+=b==this.current?" current":"",a+='" data-num="'+b+'"></a>';return a+="</div>"},this.init=function(c,d){if(this.settings=a.extend(this.settings,d),this.$this=c,this.$container=this.$this.parent(),this.$items=this.$this.children(),this.current=this.settings.start,this.total=this.$items.length,this.width=this.$container.width(),this.locked=!1,1==this.settings.fluid&&a(window).on("resize",function(){b.width=b.$container.width(),b.$container.find(".efSlider .slides").css({width:b.width*b.total+"px",left:-b.width+"px"}),b.$container.find(".efSlider .slides > div").css({width:b.width+"px"})}),this.$container.append('<div class="efSlider"><div class="controls"></div><div class="slides"></div><div class="items" style="display: none;">'+this.$items.html()+"</div>"),this.$this.hide(),1==this.settings.arrows&&(this.$container.children(".efSlider").children(".controls").append('<a href="#" class="arrow prev">'+this.settings.arrowPrev+'</a><a href="#" class="arrow next">'+this.settings.arrowNext+"</a>"),1==this.current&&0==this.settings.loop?this.$container.find(".controls .arrow.prev").addClass("inactive"):this.current==this.total&&0==this.settings.loop&&this.$container.find(".controls .arrow.next").addClass("inactive")),1==this.settings.dots&&this.$container.children(".efSlider").children(".controls").append(this.dots()),1==this.settings.pageNum){var e='<div class="pageNum">'+this.current+" of "+this.total+"</div>";this.$container.children(".efSlider").children(".controls").append(e)}var f=this.$this.children().eq(this.current-1);this.$container.children(".efSlider").children(".slides").html('<div class="prev"></div><div class="current">'+f.html()+'</div><div class="next"></div>'),this.$container.find(".efSlider .slides").css({width:3*this.width+"px",left:-this.width+"px"}),this.$container.find(".efSlider .slides > div").css({width:this.width+"px"}),1==this.settings.autoplay&&window.setInterval(this.slideTo,this.settings.interval),a("body").on("click",".efSlider .arrow",function(c){c.preventDefault(),a(this).hasClass("next")?b.slideTo():b.slideTo("prev")}),a("body").on("click",".efSliderDots .dot",function(c){c.preventDefault(),b.slideTo(a(this).data("num"))})},this.updateControls=function(a){1==this.settings.arrows&&(1==a?this.$container.find(".efSlider .arrow.prev").addClass("inactive"):this.$container.find(".efSlider .arrow.prev").removeClass("inactive"),a==this.total?this.$container.find(".efSlider .arrow.next").addClass("inactive"):this.$container.find(".efSlider .arrow.next").removeClass("inactive")),1==this.settings.dots&&(this.$container.find(".efSlider .controls .efSliderDots a").removeClass("current"),this.$container.find(".efSlider .controls .efSliderDots .dot-"+a).addClass("current")),1==this.settings.pageNum&&this.$container.find(".efSlider .controls .pageNum").html(a+" of "+this.total)},this.slideTo=function(a){if(0==b.locked){if(b.locked=!0,"undefined"==typeof a||"next"==a?a=b.current+1:"prev"==a&&(a=b.current-1),1>a){if(0==b.settings.loop)return b.locked=!1,a=1,void 0;a=b.total}else if(a>b.total){if(0==b.settings.loop)return b.locked=!1,a=b.total,void 0;a=1}var c=b.$this.children().eq(a-1),d=b.$container.find(".efSlider .slides");a>b.current?(d.children(".next").html(c.html()),b.updateControls(a),b.$container.find(".efSlider .slides").stop().animate({left:-(2*b.width)+"px"},b.settings.speed,function(){b.locked=!1,b.current=a,d.children(".prev").remove(),b.$container.find(".efSlider .slides").css({left:-b.width+"px"}),d.children(".current").removeClass("current").addClass("prev"),d.children(".next").removeClass("next").addClass("current"),d.append('<div class="next" style="width: '+b.width+'px"></div>'),b.settings.onSlideComplete(a)})):a<b.current&&(d.children(".prev").html(c.html()),b.updateControls(a),b.$container.find(".efSlider .slides").stop().animate({left:"0px"},b.settings.speed,function(){b.locked=!1,b.current=a,d.children(".next").remove(),b.$container.find(".efSlider .slides").css({left:-b.width+"px"}),d.children(".current").removeClass("current").addClass("next"),d.children(".prev").removeClass("prev").addClass("current"),d.prepend('<div class="prev" style="width: '+b.width+'px"></div>'),b.settings.onSlideComplete(a)}))}}};a.fn.efSlider=function(c){return this.each(function(){return(new b).init(a(this),c)})},window.efSlider=b}(jQuery);